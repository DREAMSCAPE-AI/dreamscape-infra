# ============================================================================
# DreamScape Big Pods - Production Environment Configuration
# ============================================================================
# Copy this file to .env.prod and fill in your actual values
# NEVER commit .env.prod to Git!
# ============================================================================

# ============================================================================
# Domain Configuration
# ============================================================================
DOMAIN=dreamscape.com
ACME_EMAIL=admin@dreamscape.com

# ============================================================================
# Docker Registry (for multi-node deployments)
# ============================================================================
REGISTRY=registry.dreamscape.com
VERSION=latest

# ============================================================================
# Traefik Authentication
# ============================================================================
# Generate with: echo $(htpasswd -nb admin your_password) | sed -e s/\\$/\\$\\$/g
TRAEFIK_AUTH=admin:$$apr1$$xyz...

# ============================================================================
# Database Configuration (used for init only, actual credentials in secrets)
# ============================================================================
DB_NAME=dreamscape_prod

# ============================================================================
# Scaling Configuration
# ============================================================================
# Core Pod replicas (Auth + User services)
CORE_POD_REPLICAS=3

# Business Pod replicas (Voyage + AI + Payment)
BUSINESS_POD_REPLICAS=5

# Experience Pod replicas (Web + Panorama + Gateway)
EXPERIENCE_POD_REPLICAS=4

# ============================================================================
# Resource Limits
# ============================================================================
# Core Pod
CORE_POD_CPU_LIMIT=2
CORE_POD_MEMORY_LIMIT=4G
CORE_POD_CPU_RESERVATION=1
CORE_POD_MEMORY_RESERVATION=2G

# Business Pod
BUSINESS_POD_CPU_LIMIT=4
BUSINESS_POD_MEMORY_LIMIT=8G
BUSINESS_POD_CPU_RESERVATION=2
BUSINESS_POD_MEMORY_RESERVATION=4G

# Experience Pod
EXPERIENCE_POD_CPU_LIMIT=2
EXPERIENCE_POD_MEMORY_LIMIT=4G
EXPERIENCE_POD_CPU_RESERVATION=1
EXPERIENCE_POD_MEMORY_RESERVATION=2G

# ============================================================================
# Monitoring Configuration
# ============================================================================
# Prometheus retention
PROMETHEUS_RETENTION=30d

# Grafana admin email
GRAFANA_ADMIN_EMAIL=admin@dreamscape.com

# AlertManager
SMTP_PASSWORD=your_smtp_password
PAGERDUTY_WEBHOOK_URL=https://events.pagerduty.com/v2/enqueue
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_MAX_SIZE=10m
LOG_MAX_FILES=3

# ============================================================================
# Performance Tuning
# ============================================================================
# PostgreSQL
POSTGRES_MAX_CONNECTIONS=500
POSTGRES_SHARED_BUFFERS=2GB
POSTGRES_EFFECTIVE_CACHE_SIZE=6GB

# Redis
REDIS_MAXMEMORY=2gb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# Kafka
KAFKA_NUM_PARTITIONS=6
KAFKA_REPLICATION_FACTOR=3
KAFKA_LOG_RETENTION_HOURS=168

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_METRICS=true
ENABLE_TRACING=false
ENABLE_DEBUG=false

# ============================================================================
# Backup Configuration
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=dreamscape-backups

# ============================================================================
# CDN Configuration (Optional)
# ============================================================================
CDN_ENABLED=false
CDN_DOMAIN=cdn.dreamscape.com
CDN_ORIGIN=https://dreamscape.com

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_CORE_AVG=100
RATE_LIMIT_CORE_BURST=50
RATE_LIMIT_AI_AVG=20
RATE_LIMIT_BUSINESS_AVG=50

# ============================================================================
# Security
# ============================================================================
# Session configuration
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict
SESSION_MAX_AGE=86400

# CORS configuration
CORS_ORIGINS=https://dreamscape.com,https://www.dreamscape.com
CORS_CREDENTIALS=true

# ============================================================================
# Node Labels (for placement constraints)
# ============================================================================
# These should be set on your Docker nodes:
# docker node update --label-add zone=us-east-1a <node-id>
# docker node update --label-add workload=compute-heavy <node-id>
# docker node update --label-add storage=ssd <node-id>
